<?php

$field = $this->field;
$list = $this->list;
$parentList=$this->parentList;
$listChild=$this->listChild;

?>



<h1> <?php
    echo $list['fieldRusName'];
    ?></h1>
<?php
if(empty($parentList)) {
?>
<a href="<?php echo $this->url(
    'addList',
    array('action' => 'add', 'id' => $list['uuid'])
);?>">Добавить поле в список</a>
<?php
}
?>
<table class="table">
    <tr>
        <th>
            Имя поля
        </th>
        <th>
            Просмотр полей
        </th>
        <th>
            Добавить поля, зависимые от этого поля
        </th>
        <th>
            Редактировать
        </th>
        <th>
            Удалить
        </th>
    </tr>
    <?php
    foreach($field as $fi) {
        $parent=$fi['parent'];
        $fi=$fi['it'];
        ?>

        <tr>
            <td>
                <a href="<?php echo $this->url(
                    'addList',
                    array('action' => 'my-fields', 'id' => $parentList['uuid'])
                );?>"><?php if(!empty($parent['value'])) {
                        echo $parent['value'].' => ';
                    }

                    ?></a>
                <?php
                echo $fi['value'];
                ?>
            </td>
            <td>
                <?php
                if(!empty($listChild)) {
                ?>
                <a href="<?php echo $this->url(
                    'addList',
                    array('action' => 'my-fields', 'id' => $listChild['uuid'])
                );?>">Посмотреть поля</a>
                <?php
                }
                ?>
            </td>
            <td>
                <a href="<?php echo $this->url(
                    'addList',
                    array('action' => 'add', 'id' => $fi['uuid'],'parent'=>'parent')
                );?>">Добавить</a>
            </td>
            <td>
                <a href="<?php echo $this->url(
                    'addList',
                    array('action' => 'edit', 'id' => $fi['uuid'])
                );?>">Редактировать</a>
            </td>
            <td>
                <a href="<?php echo $this->url(
                    'addList',
                    array('action' => 'delete', 'id' => $fi['uuid'])
                );?>">Удалить</a>
            </td>
        </tr>
    <?php
    }
    ?>
</table>
