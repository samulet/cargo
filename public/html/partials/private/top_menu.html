<!--Top menu-->
<div class="navbar navbar-inverse tiny_navbar" role="navigation">
<div class="container">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Открыть меню</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#!{{ROUTES.DASHBOARD}}">Cargo</a>
    </div>
    <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav" role="menu">
            <li ng-class="getClass('{{ROUTES.DASHBOARD}}')" role="menuitem">
                <a href="#!{{ROUTES.DASHBOARD}}">Личный кабинет</a>
            </li>
            <li ng-class="getClass('{{ROUTES.ACCOUNT}}')" role="menuitem">
                <a href="#!{{ROUTES.ACCOUNT}}">Аккаунт</a>
            </li>
            <li ng-class="getClass('{{ROUTES.USER_PROFILE}}')" role="menuitem">
                <a href="#!{{ROUTES.USER_PROFILE}}">Профиль</a>
            </li>
            <!-- <li class="menu_spinner">
                 <a href>0</a>
             </li>
             <li class="menu_spinner active_spinner">
                 <a href>3</a>
             </li>-->
        </ul>
        <user-menu class="pull_right mobile_full_width"></user-menu>
    </div>
</div>

<div aria-hidden="true" ng-controller="selectAccountAndCompanyModalController">
    <script type="text/ng-template" id="selectAccountAndCompanyModalContent.html">
        <div>
            <div class="modal-header">
                <h4 class="modal-title">Выбор Аккаунта и юридического лица</h4>
            </div>
            <div class="modal-body">
                <ul class="clear_list vertical_form_block">
                    <li class="input-group" style="width: 100%;">
                        <label for="accountData-title">
                            Выберите юридическое лицо от имени которого совершается действие
                        </label>
                        <select title="Выберите текущий аккаунт" class="form-control"
                                ng-model="option"
                                ng-disabled="isAjaxLoading"
                                size="8"
                                ng-options="option as option.company.short group by option.account.title for option in options"
                                ng-change="selectOption(option)"
                                ajax-disabler="isAjaxLoading">
                            <option value="">---</option>
                        </select>
                    </li>
                    <li>
                        <alert ng-repeat="message in selectAccountAndCompanyMessages" type="message.type"
                               close="closeAlert($index)">
                            {{message.msg}}
                        </alert>
                    </li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" ng-click="saveAccountAndCompany()"
                        ajax-disabler="isAjaxLoading" ng-disabled="isAjaxLoading">
                    Ok
                </button>
                <button type="button" class="btn btn-warning pull_left"
                        ng-click="closeSelectAccountAndCompanyModal()"
                        ajax-disabler="isAjaxLoading" ng-disabled="isAjaxLoading">
                    Отмена
                </button>
            </div>
        </div>
    </script>
</div>

<div aria-hidden="true" ng-controller="importCompaniesModalController">
    <script type="text/ng-template" id="importCompaniesModalContent.html">
        <div>
            <div class="modal-header">
                <h4 class="modal-title">Импорт юридических лиц</h4>
            </div>
            <div class="modal-body">
                <span ng-show="!isImportCompaniesComplete && !noCompaniesToImport">Импортировать юридические лица?</span>
                <span ng-show="isImportCompaniesComplete && !noCompaniesToImport">Импорт успешно завершён</span>
                <ul ng-show="isImportCompaniesComplete && !noCompaniesToImport">
                    <li>Новых: {{stat.newCompanies}}</li>
                    <li>Изменённых: {{stat.changedCompanies}}</li>
                    <li>Добавлено: {{stat.processedCompanies}}</li>
                    <li>Всего: {{stat.existsCompanies}}</li>
                </ul>
                <span ng-show="noCompaniesToImport">Нечего импортировать</span>
                <!--<ul class="vertical_form_block" ng-show="isImportCompaniesComplete">
                    <li ng-repeat="extServiceCompany in extServiceCompanies">
                        {{extServiceCompany.external_code}}
                    </li>
                </ul>-->
                <alert ng-repeat="message in importCompaniesMessages" type="message.type"
                       close="closeAlert($index)">
                    {{message.msg}}
                </alert>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary"
                        ng-show="!isImportCompaniesComplete && !noCompaniesToImport"
                        ng-click="importCompanies()"
                        ajax-disabler="isAjaxLoading"
                        ng-disabled="isAjaxLoading">
                    Импорт
                </button>
                <button type="button" class="btn btn-warning pull_left"
                        ng-show="!isImportCompaniesComplete && !noCompaniesToImport"
                        ng-click="closeImportCompaniesModal()">
                    Отмена
                </button>
                <button type="button" class="btn btn-success"
                        ng-show="isImportCompaniesComplete && !noCompaniesToImport"
                        ng-click="closeImportCompaniesModal()">
                    Готово
                </button>
            </div>
        </div>
    </script>
</div>

<div aria-hidden="true" ng-controller="importPlacesModalController">
    <script type="text/ng-template" id="importPlacesModalContent.html">
        <div>
            <div class="modal-header">
                <h4 class="modal-title">Импорт пунктов доставки</h4>
            </div>
            <div class="modal-body">
                <span ng-show="!isImportPlacesComplete && !noPlacesToImport">Импортировать пункты доставки?</span>
                <span ng-show="isImportPlacesComplete && !noPlacesToImport">Импорт успешно завершён</span>
                <ul ng-show="isImportPlacesComplete && !noPlacesToImport">
                    <li>Новых: {{stat.newPlaces}}</li>
                    <li>Изменённых: {{stat.changedPlaces}}</li>
                    <li>Добавлено: {{stat.processedPlaces}}</li>
                    <li>Всего: {{stat.existsPlaces}}</li>
                </ul>
                <span ng-show="noPlacesToImport">Нечего импортировать</span>
                <ul class="vertical_form_block" ng-show="isImportComplete">
                    <li ng-repeat="extServicePlace in extServicePlaces">
                        {{extServicePlace.ext_service_place_code}}
                    </li>
                </ul>
                <alert ng-repeat="message in importPlacesMessages" type="message.type" close="closeAlert($index)">
                    {{message.msg}}
                </alert>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary"
                        ng-show="!isImportPlacesComplete && !noPlacesToImport"
                        ng-click="importPlaces()"
                        ajax-disabler="isAjaxLoading"
                        ng-disabled="isAjaxLoading">
                    Импорт
                </button>
                <button type="button" class="btn btn-warning pull_left"
                        ng-show="!isImportPlacesComplete && !noPlacesToImport"
                        ng-click="closeImportPlacesModal()">
                    Отмена
                </button>
                <button type="button" class="btn btn-success"
                        ng-show="isImportPlacesComplete || noPlacesToImport"
                        ng-click="closeImportPlacesModal()">
                    Готово
                </button>
            </div>
        </div>
    </script>
</div>

<div aria-hidden="true" ng-controller="companiesManagementController">
    <script type="text/ng-template" id="companiesManagementContent.html">
        <div>
            <div class="modal-header">
                <h4 class="modal-title">Управление юридическими лицами</h4>
            </div>
            <div class="modal-body">
                <ul class="horizontal_list clear_list">

                    <li class="small_select_width">
                        <h5>Импортированные юридические лица</h5>
                        <select title="Выберите импортированную компанию" class="form-control"
                                ng-model="importedCompany"
                                size="8"
                                ng-options="importedCompany as importedCompany.name group by importedCompany.source for importedCompany in importedCompanies"
                                ng-change="selectImportedCompany(importedCompany)"
                                ajax-disabler="isAjaxLoading">
                            <option value="">---</option>
                        </select>
                    </li>

                    <li id="button_add_link">
                        <button type="button" class="btn btn-primary" ng-click="addCompaniesLink()"
                                ajax-disabler="isAjaxLoading"
                                ng-disabled="!importedCompany || isAjaxLoading"
                                style="min-width: 171px;">
                            <i class="glyphicon glyphicon-plus"> </i> Добавить
                            <span ng-show="existedCompany && importedCompany"> связь</span>
                            <span ng-show="!existedCompany && importedCompany"> юр. лицо</span>
                        </button>
                        <button type="button" class="btn btn-warning" ng-click="removeCompany()"
                                ajax-disabler="isAjaxLoading"
                                ng-disabled="!existedCompany || isAjaxLoading"
                                style="min-width: 171px;">
                            <i class="glyphicon glyphicon-minus"> </i> Удалить юр. лицо
                        </button>
                    </li>

                    <li class="small_select_width">
                        <h5>Существующие юридические лица</h5>
                        <select title="Выберите существующую компанию" class="form-control"
                                ng-model="existedCompany"
                                size="8"
                                ng-options="existedCompany as existedCompany.short for existedCompany in existedCompanies"
                                ng-change="selectExistedCompany(existedCompany)"
                                ajax-disabler="isAjaxLoading">
                            <option value="">---</option>
                        </select>
                    </li>
                </ul>

                <ul class="horizontal_list clear_list big_select_width">
                    <li class="small_select_width">
                        <h5>Существующие связи для выбранного юридического лица</h5>
                        <select title="Выберите связвнные компании" class="form-control"
                                ng-model="linkedCompany"
                                size="8"
                                ng-options="linkedCompany as linkedCompany.name  group by linkedCompany.source for linkedCompany in linkedCompanies"
                                ng-change="selectLinkedCompany(linkedCompany)"
                                ajax-disabler="isAjaxLoading">
                            <option value="">---</option>
                        </select>
                    </li>
                    <li style="vertical-align: bottom;">
                        <button type="button" class="btn btn-default" ng-click="removeCompaniesLink()"
                                ng-disabled="!existedCompany || !linkedCompany || isAjaxLoading"
                                ajax-disabler="isAjaxLoading">
                            <i class="glyphicon glyphicon-minus"> </i>
                            Убрать связь
                        </button>
                    </li>
                </ul>

                <alert ng-repeat="message in companiesManagementMessages" type="message.type"
                       close="closeAlert($index)">
                    {{message.msg}}
                </alert>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-click="closeCompaniesManagementModal()">
                    Готово
                </button>
            </div>
        </div>
    </script>
</div>

<div aria-hidden="true" ng-controller="placesManagementController">
    <script type="text/ng-template" id="placesManagementContent.html">
        <div>
            <div class="modal-header">
                <h4 class="modal-title">Управление пунктами доставки</h4>
            </div>
            <div class="modal-body">
                <ul class="horizontal_list clear_list">

                    <li class="small_select_width">
                        <h5>Импортированные пункты доставки</h5>
                        <select title="Выберите импортированную компанию" class="form-control"
                                ng-model="importedPlace"
                                size="8"
                                ng-options="importedPlace as importedPlace.name group by importedPlace.source for importedPlace in importedPlaces"
                                ng-change="selectImportedPlace(importedPlace)"
                                ajax-disabler="isAjaxLoading">
                            <option value="">---</option>
                        </select>
                    </li>

                    <li id="button_add_link">
                        <button type="button" class="btn btn-primary" ng-click="addPlacesLink()"
                                ajax-disabler="isAjaxLoading"
                                ng-disabled="!importedPlace || isAjaxLoading"
                                style="min-width: 171px;">
                            <i class="glyphicon glyphicon-plus"> </i> Добавить
                            <span ng-show="existedPlace && importedPlace"> связь</span>
                            <span ng-show="!existedPlace && importedPlace"> пункт</span>
                        </button>
                        <button type="button" class="btn btn-warning" ng-click="removePlace()"
                                ajax-disabler="isAjaxLoading"
                                ng-disabled="!existedPlace || isAjaxLoading"
                                style="min-width: 171px;">
                            <i class="glyphicon glyphicon-minus"> </i> Удалить пункт
                        </button>
                    </li>

                    <li class="small_select_width">
                        <h5>Существующие пункты доставки</h5>
                        <select title="Выберите существующую компанию" class="form-control"
                                ng-model="existedPlace"
                                size="8"
                                ng-options="existedPlace as existedPlace.short for existedPlace in existedPlaces"
                                ng-change="selectExistedPlace(existedPlace)"
                                ajax-disabler="isAjaxLoading">
                            <option value="">---</option>
                        </select>
                    </li>
                </ul>

                <ul class="horizontal_list clear_list big_select_width">
                    <li class="small_select_width">
                        <h5>Существующие связи для выбранного пункта доставки</h5>
                        <select title="Выберите связвнные компании" class="form-control"
                                ng-model="linkedPlace"
                                size="8"
                                ng-options="linkedPlace as linkedPlace.name  group by linkedPlace.source for linkedPlace in linkedPlaces"
                                ng-change="selectLinkedPlace(linkedPlace)"
                                ajax-disabler="isAjaxLoading">
                            <option value="">---</option>
                        </select>
                    </li>
                    <li style="vertical-align: bottom;">
                        <button type="button" class="btn btn-default" ng-click="removePlacesLink()"
                                ng-disabled="!existedPlace || !linkedPlace || isAjaxLoading"
                                ajax-disabler="isAjaxLoading">
                            <i class="glyphicon glyphicon-minus"> </i>
                            Убрать связь
                        </button>
                    </li>
                </ul>

                <alert ng-repeat="message in placesManagementMessages" type="message.type"
                       close="closeAlert($index)">
                    {{message.msg}}
                </alert>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-click="closePlacesManagementModal()">
                    Готово
                </button>
            </div>
        </div>
    </script>
</div>

</div>
<!--END Top menu-->