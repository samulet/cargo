<top-private-menu></top-private-menu>

<div ng-controller="dashboardController">
<h3>dashboard success, prepare for registration</h3>

<div aria-hidden="true" ng-controller="registrationModalController">
<script type="text/ng-template" id="registrationModalContent.html">

<!--Wizard Step 0-->
<div ng-show="registrationStep == 0">
    <div class="modal-header">
        <h4 class="modal-title">Настройка аккаунта</h4>
    </div>
    <div class="modal-body unspaced_modal-body">
        <!-- Account Data -->
        <form name="accountDataForm" role="form">
            <ul class="clear_list vertical_form_block">
                <li class="form_header">
                    <h5>Пожалуйста, укажите название аккаунта - юридическое лицо, от имени которого совершаются
                        действия</h5>
                </li>
                <li class="input-group">
                    <label for="accountData-title" class="input-group-addon" title="Обязательное поле">
                        Название аккаунта<span class="required_mark">*</span>
                    </label>
                    <input id="accountData-title" type="text"
                           ng-model="accountData.title" class="form-control" required
                           maxlength="20"/>
                </li>
            </ul>
        </form>
        <!-- END Account Data -->
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-success"
                ng-disabled="accountDataForm.$invalid && isAjaxLoading"
                ng-click="saveAccountData()" ajax-disabler="isAjaxLoading">
            Далее <i class="glyphicon glyphicon-arrow-right"> </i>
        </button>
    </div>
</div>
<!--END Wizard Step 0-->

<!--Wizard Step 1-->
<div ng-show="registrationStep == 1">
    <div class="modal-header">
        <h4 class="modal-title">Создание Юридического лица</h4>
    </div>
    <div class="modal-body unspaced_modal-body">
        <!-- Juridic Common Data -->
        <form name="juridicCommonDataForm" role="form">
            <ul class="clear_list vertical_form_block">
                <li><h4>Юридическое лицо</h4></li>
                <li class="input-group">
                    <label for="juridicData-common-shortName" class="input-group-addon" title="Обязательное поле">
                        Краткое наименование<span class="required_mark">*</span>
                    </label>
                    <input id="juridicData-common-shortName" type="text"
                           ng-model="juridicData.common.shortName" class="form-control"
                           required/>
                </li>
                <li class="input-group">
                    <label for="juridicData-common-inn" class="input-group-addon" title="Обязательное поле">
                        ИНН<span class="required_mark">*</span>
                    </label>
                    <input id="juridicData-common-inn" type="text"
                           ng-model="juridicData.common.inn" class="form-control"
                           ng-minlength="10"
                           maxlength="12"
                           required/>
                </li>
                <li class="input-group">
                    <label for="juridicData-common-fullName" class="input-group-addon">Полное наименование</label>
                    <input id="juridicData-common-fullName" type="text"
                           ng-model="juridicData.common.fullName" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-common-ogrn" class="input-group-addon">ОГРН</label>
                    <input id="juridicData-common-ogrn" type="text"
                           ng-model="juridicData.common.ogrn" class="form-control"
                           ng-minlength="13"
                           maxlength="13"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-common-kpp" class="input-group-addon">КПП</label>
                    <input id="juridicData-common-kpp" type="text"
                           ng-model="juridicData.common.inn" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-common-fiscalNumber" class="input-group-addon">Номер налоговой</label>
                    <input id="juridicData-common-fiscalNumber" type="text"
                           ng-model="juridicData.common.fiscalNumber" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-common-accountingDate" class="input-group-addon">Дата постановки на
                        учёт</label>
                    <input id="juridicData-common-accountingDate" class="form-control" type="text"
                           datepicker-popup="dd-MMMM-yyyy"
                           is-open="openedAccountingDate"
                           min="'1900-01-01'"
                           max="today"
                           datepicker-options="dateOptions" date-disabled="disabled(date,mode)"
                           ng-model="juridicData.common.accountingDate"/>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-info" ng-click="openDatePopup('openedAccountingDate')">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </button>
                </span>
                </li>
            </ul>
        </form>
        <!--END Juridic Common Data-->
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="nextStep()">Пропустить</button>
        <button type="button" class="btn btn-success"
                ng-disabled="juridicCommonDataForm.$invalid && isAjaxLoading"
                ng-click="saveData()" ajax-disabler="isAjaxLoading">
            Далее <i class="glyphicon glyphicon-arrow-right"> </i>
        </button>
    </div>
</div>
<!--END Wizard Step 1-->

<!--Wizard Step 2-->
<div ng-show="registrationStep == 2">
    <div class="modal-header">
        <h4 class="modal-title">Создание Юридического лица - Контакты</h4>
    </div>
    <div class="modal-body unspaced_modal-body">
        <!--Phones Data-->
        <add-phone-form model="juridicData.contacts.phones"></add-phone-form>
        <!--END Phones Data-->

        <!--Address Data-->
        <add-address-form model="juridicData.contacts.addresses"></add-address-form>
        <!--END Address Data-->

        <!--Email Data-->
        <add-email-form model="juridicData.contacts.emails"></add-email-form>
        <!--END Email Data-->

        <!--Sites Data-->
        <add-site-form model="juridicData.contacts.sites"></add-site-form>
        <!--END Sites Data-->
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="nextStep()">Пропустить</button>
        <button type="button" class="btn btn-success"
                ng-disabled="isAjaxLoading"
                ng-click="saveData()" ajax-disabler="isAjaxLoading">
            Далее <i class="glyphicon glyphicon-arrow-right"> </i>
        </button>
    </div>
</div>
<!--END Wizard Step 2-->

<!--Wizard Step 3-->
<div ng-show="registrationStep == 3">
    <div class="modal-header">
        <h4 class="modal-title">Создание Юридического лица - Дополнительные данные</h4>
    </div>
    <div class="modal-body unspaced_modal-body">
        <!--Juridic details-->
        <form name="juridicDetailsDataForm" role="form">
            <ul class="clear_list vertical_form_block">
                <li class="input-group">
                    <label for="juridicData-details-formingMethod" class="input-group-addon">Способ образования</label>
                    <input id="juridicData-details-formingMethod" type="text"
                           ng-model="juridicData.details.formingMethod" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-details-registrationDate" class="input-group-addon">Дата регистрации</label>
                    <input id="juridicData-details-registrationDate" class="form-control" type="text"
                           datepicker-popup="dd-MMMM-yyyy"
                           is-open="openedRegistrationDate"
                           min="'1900-01-01'"
                           max="today"
                           datepicker-options="dateOptions" date-disabled="disabled(date,mode)"
                           ng-model="juridicData.details.registrationDate"/>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-info" ng-click="openDatePopup('openedRegistrationDate')">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </button>
                </span>
                </li>
                <li class="input-group">
                    <label for="juridicData-details-registratorFiscalNumber" class="input-group-addon">
                        Номер налоговой, где проходила регистрация
                    </label>
                    <input id="juridicData-details-registratorFiscalNumber" type="text"
                           ng-model="juridicData.details.registratorFiscalNumber" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-details-authorizedCapitalSize" class="input-group-addon">
                        Размер уставного капитала
                    </label>
                    <input id="juridicData-details-authorizedCapitalSize" type="text"
                           ng-model="juridicData.details.authorizedCapitalSize" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-details-okved" class="input-group-addon">Коды ОКВЭД</label>
                    <input id="juridicData-details-okved" type="text"
                           ng-model="juridicData.details.okved" class="form-control"/>
                </li>
            </ul>
        </form>
        <!--END Juridic details-->
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="nextStep()">Пропустить</button>
        <button type="button" class="btn btn-success"
                ng-disabled="juridicDetailsDataForm.$invalid && isAjaxLoading"
                ng-click="saveData()" ajax-disabler="isAjaxLoading">
            Далее <i class="glyphicon glyphicon-arrow-right"> </i>
        </button>
    </div>
</div>
<!--END Wizard Step 3-->

<!--Wizard Step 4-->
<div ng-show="registrationStep == 4">
    <div class="modal-header">
        <h4 class="modal-title">Создание Юридического лица - Основатели и учередители</h4>
    </div>
    <div class="modal-body unspaced_modal-body">
        <!--Founders Data-->
        <add-founder-form model="juridicData.persons.founders"></add-founder-form>
        <!--END Founders Data-->

        <!--Authorized persons-->
        <add-authorized-person-form model="juridicData.persons.authorizedPersons"></add-authorized-person-form>
        <!--END Authorized persons-->
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="nextStep()">Пропустить</button>
        <button type="button" class="btn btn-success"
                ng-disabled="isAjaxLoading"
                ng-click="saveData()" ajax-disabler="isAjaxLoading">
            Далее <i class="glyphicon glyphicon-arrow-right"> </i>
        </button>
    </div>
</div>
<!--END Wizard Step 4-->

<!--Wizard Step 5-->
<div ng-show="registrationStep == 5">
    <div class="modal-header">
        <h4 class="modal-title">Создание Юридического лица - ПФР и ФМС</h4>
    </div>
    <div class="modal-body unspaced_modal-body">
        <!--PFR-->
        <form name="juridicPfrDataForm" role="form">
            <ul class="clear_list vertical_form_block bordered_top_form">
                <li class="form_header"><h4>ПФР</h4></li>
                <li class="input-group">
                    <label for="juridicData-pfrAndFms-pfr-insuranceNumber" class="input-group-addon">
                        Номер страхования в ПФР</label>
                    <input id="juridicData-pfrAndFms-pfr-insuranceNumber" type="text"
                           ng-model="juridicData.pfrAndFms.pfr.insuranceNumber" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-pfrAndFms-pfr-number" class="input-group-addon">Номер ПФР</label>
                    <input id="juridicData-pfrAndFms-pfr-number" type="text"
                           ng-model="juridicData.pfrAndFms.pfr.number" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-pfrAndFms-pfr-registrationDate" class="input-group-addon">
                        Дата постановки на учет ПФР
                    </label>
                    <input id="juridicData-pfrAndFms-pfr-registrationDate" class="form-control" type="text"
                           datepicker-popup="dd-MMMM-yyyy"
                           is-open="openedPfrRegistrationDate"
                           min="'1900-01-01'"
                           max="today"
                           datepicker-options="dateOptions" date-disabled="disabled(date,mode)"
                           ng-model="juridicData.pfrAndFms.pfr.registrationDate"/>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-info" ng-click="openDatePopup('openedPfrRegistrationDate')">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </button>
                </span>
                </li>
            </ul>
        </form>
        <!--END PFR-->

        <!--FMS-->
        <form name="juridicFmsDataForm" role="form">
            <ul class="clear_list vertical_form_block bordered_top_form">
                <li class="form_header"><h4>ФМС</h4></li>
                <li class="input-group">
                    <label for="juridicData-pfrAndFms-fms-insuranceNumber" class="input-group-addon">Номер страхования в
                        ФМС</label>
                    <input id="juridicData-pfrAndFms-fms-insuranceNumber" type="text"
                           ng-model="juridicData.pfrAndFms.fms.insuranceNumber" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-pfrAndFms-fms-number" class="input-group-addon">Номер ФМС</label>
                    <input id="juridicData-pfrAndFms-fms-number" type="text"
                           ng-model="juridicData.pfrAndFms.fms.number" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-pfrAndFms-fms-registrationDate" class="input-group-addon">
                        Дата постановки на учет ФМС
                    </label>
                    <input id="juridicData-pfrAndFms-fms-registrationDate" class="form-control" type="text"
                           datepicker-popup="dd-MMMM-yyyy"
                           is-open="openedFmsRegistrationDate"
                           min="'1900-01-01'"
                           max="today"
                           datepicker-options="dateOptions" date-disabled="disabled(date,mode)"
                           ng-model="juridicData.pfrAndFms.fms.RegistrationDate"/>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-info" ng-click="openDatePopup('openedFmsRegistrationDate')">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </button>
                </span>
                </li>
            </ul>
        </form>
        <!--END FMS-->
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="nextStep()">Пропустить</button>
        <button type="button" class="btn btn-success"
                ng-disabled="juridicPfrDataForm.$invalid && juridicFmsDataForm.$invalid && isAjaxLoading"
                ng-click="saveData()" ajax-disabler="isAjaxLoading">
            Далее <i class="glyphicon glyphicon-arrow-right"> </i>
        </button>
    </div>
</div>
<!--END Wizard Step 5-->

<!--Wizard Step 6-->
<div ng-show="registrationStep == 6">
    <div class="modal-header">
        <h4 class="modal-title">Создание Юридического лица - Лицензии и заявители</h4>
    </div>
    <div class="modal-body unspaced_modal-body">
        <!--Licenses-->
        <add-license-form model="juridicData.licensesAndRequesters.licenses"></add-license-form>
        <!--END Licenses-->

        <!--Registration requester-->
        <add-registration-requester-form
                model="juridicData.licensesAndRequesters.registrationRequesters"></add-registration-requester-form>
        <!--END Registration requester-->
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="nextStep()">Пропустить</button>
        <button type="button" class="btn btn-success"
                ng-disabled="isAjaxLoading"
                ng-click="saveData()" ajax-disabler="isAjaxLoading">
            Далее <i class="glyphicon glyphicon-arrow-right"> </i>
        </button>
    </div>
</div>
<!--END Wizard Step 6-->

<!--Wizard Step 7-->
<div ng-show="registrationStep == 7">
    <div class="modal-header">
        <h4 class="modal-title">Создание Юридического лица - Налоги</h4>
    </div>
    <div class="modal-body unspaced_modal-body">
        <!--Tax details-->
        <form name="juridicTaxDataForm" role="form">
            <ul class="clear_list vertical_form_block">
                <li class="form_header"><h4>Налоги</h4></li>
                <li class="input-group">
                    <label for="juridicData-misc-tax-accountingSystem" class="input-group-addon">
                        Вид системы налогового учета
                    </label>
                    <input id="juridicData-misc-tax-accountingSystem" type="text"
                           ng-model="juridicData.misc.tax.accountingSystem" class="form-control"
                           readonly/>
                <span class="input-group-btn">
                    <button class="btn btn-info" ng-click="openCatalog()" disabled>
                        <span class="glyphicon glyphicon-search"></span>
                    </button>
                </span>
                </li>
                <li class="input-group">
                    <label for="juridicData-misc-tax-interestRate" class="input-group-addon">Процентная ставка
                        налога</label>
                    <input id="juridicData-misc-tax-interestRate" type="text"
                           ng-model="juridicData.misc.tax.interestRate" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-misc-tax-linksEgrulEgruip" class="input-group-addon">
                        Ссылка на файлы выписки из ЕГРЮЛ/ЕГРЮИП
                    </label>
                    <input id="juridicData-misc-tax-linksEgrulEgruip" type="text"
                           ng-model="juridicData.misc.tax.linksEgrulEgruip" class="form-control"/>
                </li>
            </ul>
        </form>
        <!-- END Tax details -->

        <!--Other Juridic Data-->
        <form name="juridicOtherDataForm" role="form">
            <ul class="clear_list vertical_form_block bordered_top_form">
                <li class="form_header"><h4>Остальные учредительные документы</h4></li>
                <li class="input-group">
                    <label for="juridicData-misc-other-charterFilesLink" class="input-group-addon">
                        Ссылка на файлы устава
                    </label>
                    <input id="juridicData-misc-other-charterFilesLink" type="text"
                           ng-model="juridicData.misc.other.charterFilesLink" class="form-control"
                           readonly/>
                <span class="input-group-btn">
                    <button class="btn btn-info" ng-click="openCatalog()" disabled>
                        <span class="glyphicon glyphicon-search"></span>
                    </button>
                </span>
                </li>
                <li class="input-group">
                    <label for="juridicData-misc-other-juridicFaceDecisionDocName" class="input-group-addon">
                        Наименование документа с решением о создании юр лица
                    </label>
                    <input id="juridicData-misc-other-juridicFaceDecisionDocName" type="text"
                           ng-model="juridicData.misc.other.juridicFaceDecisionDocName" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-misc-other-documentNumber" class="input-group-addon">Номер документа</label>
                    <input id="juridicData-misc-other-documentNumber" type="text"
                           ng-model="juridicData.misc.other.documentNumber" class="form-control"/>
                </li>
                <li class="input-group">
                    <label for="juridicData-misc-other-documentDate" class="input-group-addon">Дата документа</label>
                    <input id="juridicData-misc-other-documentDate" class="form-control" type="text"
                           datepicker-popup="dd-MMMM-yyyy"
                           is-open="openedDocumentDate"
                           min="'1900-01-01'"
                           max="today"
                           datepicker-options="dateOptions" date-disabled="disabled(date,mode)"
                           ng-model="juridicData.misc.other.documentDate"/>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-info" ng-click="openDatePopup('openedDocumentDate')">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </button>
                </span>
                </li>
                <li class="input-group">
                    <label for="juridicData-misc-other-doumentScansLink" class="input-group-addon">Ссылки на файлы
                        сканов
                        документа</label>
                    <input id="juridicData-misc-other-doumentScansLink" type="text"
                           ng-model="juridicData.misc.other.doumentScansLink" class="form-control"/>
                </li>
            </ul>
        </form>
        <!--END Other Juridic Data-->

        <!--Check Data-->
        <form name="juridicCheckDataForm" role="form">
            <ul class="clear_list vertical_form_block bordered_top_form">
                <li class="form_header"><h4>Для счета</h4></li>
                <li class="input-group">
                    <label for="juridicData-misc-check-number" class="input-group-addon">
                        Ссылки на номер счета
                    </label>
                    <input id="juridicData-misc-check-number" type="text"
                           ng-model="juridicData.misc.check.checkNumber" class="form-control"
                           readonly/>
                <span class="input-group-btn">
                    <button class="btn btn-info" ng-click="openCatalog()" disabled>
                        <span class="glyphicon glyphicon-search"></span>
                    </button>
                </span>
                </li>
                <li class="input-group">
                    <label for="juridicData-misc-check-chiefAccountant" class="input-group-addon">
                        Ссылка на главного бухгалтера
                    </label>
                    <input id="juridicData-misc-check-chiefAccountant" type="text"
                           ng-model="juridicData.misc.check.chiefAccountant" class="form-control"
                           readonly/>
                <span class="input-group-btn">
                    <button class="btn btn-info" ng-click="openCatalog()" disabled>
                        <span class="glyphicon glyphicon-search"></span>
                    </button>
                </span>
                </li>

            </ul>
        </form>
        <!-- END Check Data -->
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-success"
                ng-disabled="juridicTaxDataForm.$invalid && juridicOtherDataForm.$invalid && juridicCheckDataForm.$invalid && isAjaxLoading"
                ng-click="saveData(true)" ajax-disabler="isAjaxLoading"> Завершить
        </button>
    </div>
</div>
<!--END Wizard Step 7-->

<alert ng-repeat="message in messages" type="message.type" close="closeAlert($index)">
    <!--TODO check styles-->
    {{message.msg}}
</alert>
</script>
</div>

</div>